<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lịch sử làm bài khảo sát</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; background: #f6fbff;}
        .container { max-width: 1200px; margin: 40px auto; background: #fff; border-radius: 13px; box-shadow: 0 2px 16px #d0e8fd22; padding: 30px; }
        h2 { color: #2176ae; margin-bottom: 22px;}
        .result-table { width: 100%; border-collapse: collapse; margin-top: 14px; background: #fff;}
        .result-table th, .result-table td { padding: 12px 15px; font-size: 1em; }
        .result-table th { background: #eaf3fa; color: #255c88; font-weight: 600; text-transform: uppercase; border-bottom: 2px solid #e3eaf2;}
        .result-table td { border-bottom: 1px solid #f3f3f3;}
        .action-btn { background: #2176ae; color: #fff; border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer;}
        .action-btn:hover { background: #1765a0; }
    </style>
</head>
<body>
<div th:replace="staff/header :: main-header"></div>

<div class="container">
    <h2>Lịch sử làm bài khảo sát</h2>
    <div style="overflow-x: auto;">
        <table class="result-table">
            <thead>
                <tr>
                    <th>Mã</th>
                    <th>User</th>
                    <th>Email</th>
                    <th>Tên khảo sát</th>
                    <th>Điểm</th>
                    <th>Số câu đúng</th>
                    <th>Tổng số câu</th>
                    <th>Ngày bắt đầu</th>
                    <th>Ngày nộp</th>
                    <th>Thời gian làm (phút)</th>
                    <th>Chi tiết</th>
                </tr>
            </thead>
            <tbody>
            <tr th:each="row : ${testResults}">
                <td th:text="${row[0]}"></td>
                <td th:text="${row[1]}"></td>
                <td th:text="${row[2]}"></td>
                <td th:text="${row[3]}"></td>
                <td th:text="${row[4]}"></td>
                <td th:text="${row[6]}"></td>
                <td th:text="${row[5]}"></td>
                <td th:text="${#dates.format(row[7], 'dd/MM/yyyy HH:mm')}"></td>
                <td th:text="${#dates.format(row[8], 'dd/MM/yyyy HH:mm')}"></td>
                <td th:text="${row[9]}"></td>
                <td>
                    <a th:href="@{'/staff/test-results/' + ${row[0]}}" class="action-btn">
                        Xem chi tiết
                    </a>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(testResults)}">
                <td colspan="11" style="text-align:center;color:#bbb;padding:24px 0;">
                    Không có kết quả nào phù hợp.
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
