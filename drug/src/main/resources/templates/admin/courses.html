<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quản lý Khóa học</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', Arial, sans-serif; background: #f8fbfe;}
        h2 { font-weight: 700; color: #2176ae; }
        .table th, .table td { vertical-align: middle !important; }
        .btn { font-size: 0.97rem; }
        .course-img { width: 80px; height: 48px; object-fit: cover; border-radius: 8px;}
        .actions { display: flex; gap: 6px; }
    </style>
</head>
<body>
    <div th:replace="admin/header :: main-header"></div>
    <div class="container mt-4">
        <h2 class="mb-4"><i class="fa-solid fa-graduation-cap"></i> Quản lý Khóa học</h2>
        <a href="/admin/courses/edit" class="btn btn-success mb-3">
            <i class="fa-solid fa-plus"></i> Thêm khóa học
        </a>
        <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle">
                <thead>
                    <tr>
                        <th>Ảnh</th>
                        <th>Tên khóa học</th>
                        <th>Đối tượng</th>
                        <th>Chủ đề</th>
                        <th>Số video</th>
                        <th>SL HV</th>
                        <th>Ngày tạo</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="course : ${courses}">
                        <td>
                            <img th:src="${course.image != null ? course.image : '/static/default-course.png'}" alt="Image" class="course-img"/>
                        </td>
                        <td th:text="${course.name}"></td>
                        <td th:text="${course.targetObject}"></td>
                        <td th:text="${course.topic}"></td>
                        <td>
                            <span th:text="${(course.video1 != null ? 1 : 0) + (course.video2 != null ? 1 : 0) + (course.video3 != null ? 1 : 0)}"></span>
                        </td>
                        <td th:text="${course.participants}"></td>
                        <td th:text="${#temporals.format(course.createdAt, 'dd/MM/yyyy')}"></td>
                        <td class="actions">
                            <a th:href="@{'/admin/courses/edit?id=' + ${course.id}}" class="btn btn-warning btn-sm">
                                <i class="fa-solid fa-pen"></i> Sửa
                            </a>
                            <a th:href="@{'/admin/courses/delete?id=' + ${course.id}}"
                               class="btn btn-danger btn-sm"
                               onclick="return confirm('Bạn chắc chắn muốn xóa khóa học này?')">
                                <i class="fa-solid fa-trash"></i> Xóa
                            </a>
                        </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(courses)}">
                        <td colspan="8" class="text-center text-muted">Chưa có khóa học nào.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
